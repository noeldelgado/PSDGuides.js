(function(e,t){"use strict";function u(e){s.extend(e),u.prototype.init()}e.PSDGuides=u;var n=e.document,r=document.getElementsByTagName("body")[0],i={},s={},o={show:!0,canvas:r,canvasWidth:0,orientation:"center",backColor:"rgba(132, 170, 234, 0.25)",lineColor:"rgba(73, 141, 255, 1)",xGuides:{},yGuides:{},zindex:9999};u.prototype={init:function(){this.UI(),this.bindEvents(),this.draw()},bindEvents:function(){s.addEvent(e,"resize",function(){o.show&&u.prototype.draw()}),s.addEvent(i.toggler,"click",function(e){return i.wrapper.style.display!="none"?(i.wrapper.style.display="none",o.show=!1,i.toggler.innerHTML=i.toggler.textOff):(i.wrapper.style.display="",o.show=!0,i.toggler.innerHTML=i.toggler.textOn,u.prototype.draw()),!1})},UI:function(){i.toggler=document.createElement("a"),i.toggler.textOn="Hide PSDGuides.js",i.toggler.textOff="Show PSDGuides.js";var e=i.toggler.style;e.position="fixed",e.right="10px",e.top="10px",e.padding="5px 10px",e.border="1px solid #000",e.backgroundColor="rgba(0, 0, 0, 0.7)",e.borderRadius="3px",e.color="#f0f0f0",e.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",e.fontSize="11px",e.fontWeight="bold",e.zIndex=o.zindex+1,e.cursor="pointer",i.toggler.innerHTML=o.show?i.toggler.textOn:i.toggler.textOff,i.toggler.setAttribute("id","psdguide-ui"),r.appendChild(i.toggler)},draw:function(){var e;this.clear(),i.wrapper=document.createElement("div"),e=i.wrapper.style,e.position="absolute",e.top=0,e.width="100%",e.height=s.getHeight()+"px",e.zIndex=o.zindex,e.backgroundColor=o.backColor,i.wrapper.setAttribute("id","psGuidesWrapper"),r.appendChild(i.wrapper),o.show||(e.display="none"),s.isObjEmpty(o.yGuides)||this.drawYLines(),s.isObjEmpty(o.xGuides)||this.drawXLines()},drawYLines:function(){var e=0,t=null;i.yContainer=document.createElement("div"),t=i.yContainer.style,t.position="absolute",t.top=0,t.height="100%",t.width="100%",i.wrapper.appendChild(i.yContainer),o.yGuides.map(function(t,n){var r=document.createElement("div");r.style.height=o.yGuides[n]-1+"px",r.style.borderBottom="1px solid "+o.lineColor,i.yContainer.appendChild(r),e+=parseInt(o.yGuides[n],10)}),e=Math.max(r.clientHeight,e),i.wrapper.style.height=e},drawXLines:function(){var e=o.canvasWidth>0?o.canvasWidth:s.getWidth(),t=0,n=s.getOrientation(e),r=null,u;i.xContainer=document.createElement("div"),r=i.xContainer.style,r.position="fixed",r.top=0,r.height="100%",r.width=e-2+"px",r.marginLeft=n+"px",r.borderLeft="1px solid "+o.lineColor,r.borderRight="1px solid "+o.lineColor,i.wrapper.appendChild(i.xContainer);if(!s.isObjEmpty(o.xGuides))while(t<e)o.xGuides.map(function(n,r){var s=o.xGuides[r],a;if(typeof s=="string"){if(s.indexOf("*")!==-1){var f=0;s=s.replace(/[()\s]/g,"").split(/[,*]/g),a=s[s.length-1];for(;f<a;f+=1)s.map(function(n,r){if(r===s.length-1)return;u=document.createElement("div"),u.style.position="absolute",u.style.left=t+"px",u.style.height="100%",u.style.width=parseInt(s[r],10)-1+"px",u.style.borderRight="1px solid "+o.lineColor,t+=parseInt(s[r],10),t<e?i.xContainer.appendChild(u):null})}}else u=document.createElement("div"),u.style.position="absolute",u.style.left=t+"px",u.style.height="100%",u.style.width=parseInt(o.xGuides[r],10)-1+"px",u.style.borderRight="1px solid "+o.lineColor,t+=parseInt(o.xGuides[r],10),t<e?i.xContainer.appendChild(u):null})},clear:function(){var e=document.getElementById("psGuidesWrapper");e!==null&&r.removeChild(e)}},s.extend=function(e){var t;for(t in e)e.hasOwnProperty(t)&&(o[t]=e[t])},s.addEvent=function(t,n,r){t.addEventListener?t.addEventListener(n,r,!1):t.attachEvent&&(t["e"+n+r]=r,t[n+r]=function(){t["e"+n+r](e.event)},t.attachEvent("on"+n,t[n+r]))},s.getHeight=function(){return Math.max(Math.max(r.scrollHeight,n.documentElement.scrollHeight),Math.max(r.offsetHeight,n.documentElement.offsetHeight),Math.max(r.clientHeight,n.documentElement.clientHeight))},s.getWidth=function(){return Math.max(Math.max(r.scrollWidth,n.documentElement.scrollWidth),Math.max(r.offsetWidth,n.documentElement.offsetWidth),Math.max(r.clientWidth,n.documentElement.clientWidth))},s.isObjEmpty=function(e){return Object.getOwnPropertyNames(e).length===0?!0:!1},s.getOrientation=function(e){switch(o.orientation){case"center":return Math.floor((s.getWidth()-e)/2);case"left":return 0;case"right":return Math.floor(s.getWidth()-e);default:return Math.floor((s.getWidth()-e)/2)}}})(window)